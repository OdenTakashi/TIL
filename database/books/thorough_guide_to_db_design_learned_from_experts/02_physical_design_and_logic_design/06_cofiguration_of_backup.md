## バックアップ設計
### バックアップの種類
- フルバックアップ(完全バックアップ)
- 差分バックアップ
- 増分バックアップ

#### フルバックアップ
全てのデータのバックアップを取る、バックアップの基本
デメリット
  - 時間がかかる
    バックアップウィンドウが長い
  - HWリソースへの負荷が高い
    ストレージに対してI/O、サーバーのCPU、メモリの消費量が増えるため。
    裏で実行されているクエリの性能が下がる
  - ストレージ消費量が大きい
    DBMSのデータを丸ごとバックアップするため、バックアップの中で最大量のデータ量。

-> ここで差分バックアップを導入する。
  月曜日のみフルバックアップを取り、それ以降は差分だけのバックアップを取る
  ここではトランザクションログを持つことで、DBに対する操作をリプレイ可能になる。
  ここでは、トランザクションログが増えていくイメージ。
  デメリット
    - フルバックアップファイルとログファイルを適用させるため、時間がかかり手順も増える
    - どちらのデータも壊れていないことが前提

#### 増分バックアップ
差分バックアップの際は月曜の差分を含めて火曜日に持っていた -> 無駄が多い
増分バックアップはその日の差分のみを持ち続け、リカバリの際は全ての情報が必要。
メリットとして、データ容量を抑えることができ、コスト敵に優れている
デメリットとして、手順が複雑。

複雑にすることでデータ容量を減らす。
単純にするが、データ量が増え、時間も増える。
バックアップコストが高くなるにつれて、リカバリコストが下がる
バックアップコストが低くなるにつれて、リカバリコストが上がる

選択する指針
- いつの状態にフッキュさせる必要があるのか、復旧の必要性
- バックアップウィンドウをどれだけ使用できるか
- リカバリウィンドウをどれだけ使用できるか(RTO)
- 何世代までデータを持つ必要があるか。(RPO)
